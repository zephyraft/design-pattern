# 原型模式

如果对象的创建成本比较大，而同一个类的不同对象之间差别不大（大部分字段都相同），在这种情况下，我们可以利用对已有对象（原型）进行复制（或者叫拷贝）的方式来创建新对象，以达到节省创建时间的目的。

## 应用场景

如果对象中的数据需要经过复杂的计算才能得到（比如排序、计算哈希值），或者需要从 RPC、网络、数据库、文件系统等非常慢速的 IO 中读取，这种情况下，我们就可以利用原型模式，从其他已有对象中直接拷贝得到，而不用每次在创建新对象的时候，都重复执行这些耗时的操作。

## 实现
- 深拷贝
  - 深拷贝得到的是一份完完全全独立的对象
  - 实现方式
    - 递归拷贝对象，对象的引用对象以及对象的引用对象的引用对象，...,直到要拷贝的对象只包含基本数据类型数据，没有引用对象为止
    - 序列化对象，然后再反序列化为新对象
- 浅拷贝 Object.clone()
  - 浅拷贝只会复制对象中基本数据类型数据和引用对象的内存地址
- 先浅拷贝，然后对要更新的对象使用深拷贝。copy on write思想

一般情况下应使用深拷贝，如果深操作非常耗时，可以考虑使用Copy on write进行优化（先浅拷贝，要更新时再使用深拷贝）
